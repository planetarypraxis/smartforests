{% extends "base.html" %}
{% load ckdjango_tags ckbootstrap_tags wagtailcore_tags %}

{% block content %}
<main class="container-fluid mb-7">
  <div class="row gx-0 mt-3 mt-md-7">
    <div class="d-block d-md-none mb-5">
      <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M7.00033 2.33334L7.82283 3.15584L4.56783 6.41668H11.667V7.58334H4.56783L7.82283 10.8442L7.00033 11.6667L2.33366 7.00001L7.00033 2.33334Z" fill="#043003"/>
      </svg>
      <a class="ms-2" href="{{ settings.logbooks.ImportantPages.page_url.logbooks_index_page }}">Logbooks</a>
    </div>
    <header class="col-lg-6 offset-lg-3">
      <h1 class="mb-3 mb-md-5">{{self.title}}</h1>
    </header>
    <section class="d-flex d-md-none flex-row mb-3">
      {% for tag in self.tags.all %}
        {% include "logbooks/tag_label.html" with tag=tag %}
      {% endfor %}
    </section>
  </div>
  <div class="row gx-0">
    <aside class='col-lg-2'>
      {% include "logbooks/metadata.html" with page=self %}
    </aside>
    <section class="col-lg-6 offset-lg-1 gx-0">
      <div class="mb-7">
        {% if self.description %}
        <div class="bg-white rounded-1 p-3">
          {{self.description|richtext}}
        </div>
        {% endif %}
      </div>
      <div class="row row-cols-1 gx-0 gy-7">
      {% for entry in child_page_list %}
        <div class="col">
          {{entry.content_html}}
        </div>
      {% endfor %}
      </div>
    </section>
  </div>
</main>
{% endblock %}

<!-- The Masonry component doesn't get on with the flex: 1 we usually stick at the bottom of the page -->
{% block spacer %}
{% endblock %}

{% block extra_js %}
<script src="https://unpkg.com/infinite-scroll@3/dist/infinite-scroll.pkgd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/masonry-layout@4/dist/masonry.pkgd.min.js" crossorigin="anonymous"></script>
{% endblock %}